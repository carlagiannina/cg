(function(e){"use strict";e(document).ready(function(){function r(t,n){if(!t){return}var r=null;if(n==="prev"){r=e("#ut-portfolio-details-"+t).find(".active").prev().height()}if(n==="current"){r=e("#ut-portfolio-details-"+t).find(".active").height()}if(n==="next"){r=e("#ut-portfolio-details-"+t).find(".active").next().height()}e("#ut-portfolio-details-wrap-"+t).height(r+30)}function i(t){if(!t){return}var n=e("#ut-portfolio-details-"+t).find(".active").prev(".ut-portfolio-detail"),r=e("#ut-portfolio-details-"+t).find(".active").next(".ut-portfolio-detail");if(!n.length){e("#ut-portfolio-details-wrap-"+t).find(".prev-portfolio-details").animate({opacity:0})}else{e("#ut-portfolio-details-wrap-"+t).find(".prev-portfolio-details").animate({opacity:1})}if(!r.length){e("#ut-portfolio-details-wrap-"+t).find(".next-portfolio-details").animate({opacity:0})}else{e("#ut-portfolio-details-wrap-"+t).find(".next-portfolio-details").animate({opacity:1})}s()}function s(){e(".ut-portfolio-details-navigation").each(function(){var t=e(this),n=t.parent(),r=n.find(".active"),i=r.find(".ut-portfolio-media").height();t.find(".next-portfolio-details").animate({top:i/2+45});t.find(".prev-portfolio-details").animate({top:i/2+45})})}function o(t){if(!t){return}e("#ut-video-call-"+t).fadeOut(400,function(){e(this).html("")})}function u(t,n){if(!t){return}var r=e("#ut-portfolio-detail-"+t),i=utPortfolio.ajaxurl;e.ajax({type:"POST",url:i,data:{action:"ut_get_portfolio_post",portfolio_id:t},success:function(e){r.find(".ut-video-call").show().html(e).fitVids();return false},complete:function(){if(n&&typeof n==="function"){n()}}})}function a(t,n){if(!t){return}var r=e("#ut-portfolio-detail-"+t).find(".ut-load-me"),i=r.data("original");if(!r.attr("src")){r.attr("src",i).one("load",function(){if(!this.complete||typeof this.naturalWidth=="undefined"||this.naturalWidth==0){alert("There is a broken image inside your portfolio: "+$this.attr("src",i))}else{if(n&&typeof n==="function"){n()}}})}else{if(n&&typeof n==="function"){n()}}}function f(t,n){if(!t){return}var r=e("#portfolio-gallery-slider-"+t).find(".ut-load-me"),i=r.length;r.each(function(r){var o=e(this),u=o.data("original");o.attr("src",u).one("load",function(){if(!this.complete||typeof this.naturalWidth=="undefined"||this.naturalWidth==0){alert("There is a broken image inside your portfolio: "+o.attr("src",u))}else{if(!--i){e("#portfolio-gallery-slider-"+t).flexslider({animation:"fade",controlNav:false,animationLoop:true,slideshow:false,smoothHeight:true,startAt:0,after:function(){s()}});if(n&&typeof n==="function"){n()}}}})})}var t=e("img.portfolio-lazy");t.lazyload({event:"scroll",load:function(){e(this).animate({opacity:1});e.waypoints("refresh")},failure_limit:Math.max(t.length-1,0)});e('a[data-rel^="utPortfolio"]').prettyPhoto({social_tools:false,deeplinking:false,default_width:1024,allow_resize:true,markup:'<div class="pp_pic_holder"> 						<div class="pp_top"> 							<div class="pp_left"></div> 							<div class="pp_middle"></div> 							<div class="pp_right"></div> 						</div> 						<div class="pp_content_container"> 							<div class="pp_left"> 							<div class="pp_right"> 								<div class="pp_content"> 									<div class="pp_loaderIcon"></div> 									<div class="pp_fade"> 										<a href="#" class="pp_expand" title="Expand the image">Expand</a> 										<div class="pp_hoverContainer"> 											<a class="pp_next" href="#">next</a> 											<a class="pp_previous" href="#">previous</a> 										</div> 										<div id="pp_full_res"></div> 										<div class="pp_details"> 											<div class="pp_nav"> 												<a href="#" class="pp_arrow_previous">Previous</a> 												<p class="currentTextHolder">0/0</p> 												<a href="#" class="pp_arrow_next">Next</a> 											</div> 											<div class="ppt">&nbsp;</div> 											<p class="pp_description"></p> 											{pp_social} 											<a class="pp_close" href="#">Close</a> 										</div> 									</div> 								</div> 							</div> 							</div> 						</div> 						<div class="pp_bottom"> 							<div class="pp_left"></div> 							<div class="pp_middle"></div> 							<div class="pp_right"></div> 						</div> 					</div> 					<div class="pp_overlay"></div>'});e(".ut-hover").each(function(t,n){var r=e(this).closest(".ut-portfolio-wrap").data("textcolor");e(this).find(".ut-hover-layer").css({color:r});e(this).find(".ut-hover-layer").find(".portfolio-title").attr("style","color: "+r+" !important")});e(".ut-hover").mouseenter(function(){var t=e(this).closest(".ut-portfolio-wrap").data("hovercolor"),n=e(this).closest(".ut-portfolio-wrap").data("opacity");e(this).find(".ut-hover-layer").css("background","rgba("+t+","+n+")");e(this).find(".ut-hover-layer").css("opacity",1)}).mouseleave(function(){e(this).find(".ut-hover-layer").css("opacity",0)});var n=false;e(window).smartresize(function(){s()});e(document).on("click",".ut-portfolio-link",function(t){if(n){return false}n=true;var r=e(this).data("post"),s=e(this).data("wrap"),o=e("#ut-loader-"+s),l=e("#ut-portfolio-details-wrap-"+s),c=e("#ut-portfolio-details-"+s),h=l.find("#ut-portfolio-detail-"+r),p=l.closest("section").data("width"),d=h.data("format");o.stop(true).fadeIn(400,function(){e.scrollTo(l,650,{easing:"easeInOutExpo",offset:-100,axis:"y",onAfter:function(){if(p!=="centered"){h.addClass("grid-container")}e(".ut-portfolio-detail").removeClass("active").hide();h.addClass("active").css("visibility","hidden").show().slideDown(800,"easeInOutExpo",function(){if(d==="gallery"){f(r,function(){o.fadeOut(400,function(){l.addClass("show overflow-visible");l.find(".ut-portfolio-details-navigation").addClass("show").data("single",r);h.css("visibility","visible").animate({opacity:1},400,"easeInOutExpo",function(){i(s);l.height(c.outerHeight()+50);e(window).trigger("scroll");n=false})})})}else if(d==="video"){u(r,function(){o.fadeOut(400,function(){l.addClass("show overflow-visible");l.find(".ut-portfolio-details-navigation").addClass("show").data("single",r);h.css("visibility","visible").animate({opacity:1},400,"easeInOutExpo",function(){i(s);l.height(c.outerHeight()+50);e(window).trigger("scroll");n=false})})})}else{a(r,function(){o.fadeOut(400,function(){l.addClass("show overflow-visible");l.find(".ut-portfolio-details-navigation").addClass("show").data("single",r);h.css("visibility","visible").animate({opacity:1},400,"easeInOutExpo",function(){i(s);l.height(c.outerHeight()+50);e(window).trigger("scroll");n=false})})})}})}})});t.preventDefault()});e(document).on("click",".next-portfolio-details",function(t){if(n){return false}n=true;var r=e(this).data("wrap"),s=e("#ut-portfolio-details-wrap-"+r),l=s.closest("section").data("width"),c=e("#ut-portfolio-details-"+r),h=e("#ut-loader-"+r),p=c.find(".active").next().data("post"),d=c.find(".active").next().data("format"),v=c.find(".active").data("post"),m=c.find(".active").data("format"),g=c.find("#ut-portfolio-detail-"+p);if(m==="video"){o(v)}if(l!=="centered"){g.addClass("grid-container")}e("#ut-portfolio-detail-"+v).removeClass("active").fadeOut(function(){h.stop(true).fadeIn(400,function(){g.addClass("active").css("visibility","hidden").slideDown(800,"easeInOutExpo",function(){if(d==="gallery"){f(p,function(){h.fadeOut(400,function(){c.find(".ut-portfolio-details-navigation").data("single",p);g.css("visibility","visible").animate({opacity:1},400,"easeInOutExpo",function(){i(r);s.height(c.outerHeight()+50);n=false})})})}else if(d==="video"){u(p,function(){h.fadeOut(400,function(){c.find(".ut-portfolio-details-navigation").data("single",p);g.css("visibility","visible").animate({opacity:1},400,"easeInOutExpo",function(){i(r);s.height(c.outerHeight()+50);n=false})})})}else{a(p,function(){h.fadeOut(400,function(){c.find(".ut-portfolio-details-navigation").data("single",p);g.css("visibility","visible").animate({opacity:1},400,"easeInOutExpo",function(){i(r);s.height(c.outerHeight()+50);n=false})})})}})})});t.preventDefault()});e(document).on("click",".prev-portfolio-details",function(t){if(n){return}n=true;var r=e(this).data("wrap"),s=e("#ut-portfolio-details-wrap-"+r),l=s.closest("section").data("width"),c=e("#ut-portfolio-details-"+r),h=e("#ut-loader-"+r),p=c.find(".active").prev().data("post"),d=c.find(".active").prev().data("format"),v=c.find(".active").data("post"),m=c.find(".active").data("format"),g=c.find("#ut-portfolio-detail-"+p);if(m==="video"){o(v)}if(l!=="centered"){g.addClass("grid-container")}e("#ut-portfolio-detail-"+v).removeClass("active").fadeOut(function(){h.stop(true).fadeIn(400,function(){g.addClass("active").css("visibility","hidden").slideDown(800,"easeInOutExpo",function(){if(d==="gallery"){f(p,function(){h.fadeOut(400,function(){c.find(".ut-portfolio-details-navigation").data("single",p);g.css("visibility","visible").animate({opacity:1},400,"easeInOutExpo",function(){i(r);s.height(c.outerHeight()+50);n=false})})})}else if(d==="video"){u(p,function(){h.fadeOut(400,function(){c.find(".ut-portfolio-details-navigation").data("single",p);g.css("visibility","visible").animate({opacity:1},400,"easeInOutExpo",function(){i(r);s.height(c.outerHeight()+50);n=false})})})}else{a(p,function(){h.fadeOut(400,function(){c.find(".ut-portfolio-details-navigation").data("single",p);g.css("visibility","visible").animate({opacity:1},400,"easeInOutExpo",function(){i(r);s.height(c.outerHeight()+50);n=false})})})}})})});t.preventDefault()});e(document).on("click",".close-portfolio-details",function(t){if(n){return false}n=true;var r=e(this).data("wrap"),i=e(this).parent().data("single"),s=e(this).data("post"),u=e("#ut-portfolio-detail-"+s).data("format");e("#ut-portfolio-details-wrap-"+r).find(".ut-portfolio-details-navigation").removeClass("show");e("#ut-portfolio-detail-"+i).removeClass("active").animate({opacity:0},200,"easeInOutExpo",function(){e("#ut-portfolio-details-wrap-"+r).removeClass("show").removeClass("overflow-visible");n=false});if(u==="video"){o(i)}t.preventDefault()})})})(jQuery)